<!DOCTYPE html>
<html>
<head>
	<title>EX</title>
	<meta charset="UTF-8">
	
    <link rel="icon" href="/favicon.ico">
  	
  	<link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
<div class="author-meta">
	<div class="site-title">
		<h1><a href="http://www.startexample.com">EX</a></h1>
		<h3>
			<span>生活因折腾而精彩</span>
			<span class="site-title-offset">技术因专注而精进</span>
		</h3>
	</div>
</div>
<div class="post">
	<div class="post-head">
		<article class="article">
	<h3> <a href="/2016/04/18/NC-EXAMPLE项目实践总结与思考/">NC-EXAMPLE项目实践总结与思考</a> </h3>
	<aside class="article-meta">
		<span>时间: 2016-04-18 08:20:50 </span>
		<span class="article-tag">
		标签:
		
			
			<a href="/tags/koa/">koa</a>
		
			 · 
			<a href="/tags/nodejs/">nodejs</a>
		
			 · 
			<a href="/tags/项目/">项目</a>
		
		</span>
	</aside>
</article>
	</div>
	<div class="markdown-text">
		<h1 id="why-NC-EXAMPLE"><a href="#why-NC-EXAMPLE" class="headerlink" title="why NC-EXAMPLE"></a>why NC-EXAMPLE</h1><p>动手实践该项目的初衷是为了对<code>koa</code>及es6相关知识进行一个实践性学习, 以期达到对利用<code>koa</code>开发项目的全貌有一个初步的认识, 总体来说该项目主要参照<a href="https://cnodejs.org/" target="_blank" rel="external">nodeclub</a>包括一些样式以及项目结构来实现, 个人认为已经经过实践的项目总是有很多可学习的地方(^.^).</p>
<h1 id="实践思考"><a href="#实践思考" class="headerlink" title="实践思考"></a>实践思考</h1><p>该项目实践过程中主要问题以及不足如下:</p>
<ul>
<li><code>mongoose</code>同步查询的问题, 主要采用<code>Promise</code>方法解决.</li>
<li>模型的问题, 该实践项目的模型设计的非常简单, 并没有考虑模型之间的关联关系等复杂逻辑.</li>
<li>数据输出到模板的问题, 主要是统一将数据封装在一个<code>data</code>对象中, 渲染模板时统一将<code>data</code>作为参数传入模板.</li>
<li>用户状态问题, 起初是在每个接口的地方来对用户对<code>session</code>状态进行认证的, 后来发现太繁琐, 因此简单写了个名为<code>user_sess.js</code>的中间件统一处理当前登录用户的状态问题, 这里有一点需要注意<code>该项目主要用于实践, 对于</code>koa-session`组件一般都是需要自己去实践其编码解码函数的, 因为其对cookie中的数据加解密是公开的, 所以为了安全性考虑最好自己实现加解密函数.</li>
<li>错误处理问题, 该项目的错误处理主要使用自己编写的<code>error.js</code>文件去统一处理, 存在诸多不足如错误码处理不全, 异常情况考虑过于简单等.</li>
</ul>
<h1 id="关于该项目"><a href="#关于该项目" class="headerlink" title="关于该项目"></a>关于该项目</h1><p>整个项目主要基于koa框架以及一些es6的相关特性实现, 主要使用的技术点如下:</p>
<ul>
<li>requirejs客户端</li>
<li>mongoose数据存储</li>
<li>koa-ejs页面渲染</li>
<li>koa-router处理路由</li>
<li>koa-session控制用户登录</li>
<li>koa-send控制静态文件访问</li>
<li>koa-compress启用gzip压缩</li>
<li>koa-request-log记录请求日志</li>
<li>koa-less使用less编译样式文件</li>
<li>koa-etag/koa-conditional-get添加缓存功能</li>
</ul>
<h1 id="实践结果"><a href="#实践结果" class="headerlink" title="实践结果"></a>实践结果</h1><p>该项目源代码可查看github, <a href="https://github.com/ncuzp/nc-example" target="_blank" rel="external">NC-EXAMPLE源代码</a>, 该项目的目的只是为了实践使用koa去开发一个完整的项目, 开发的功能点并不是很多, 主要功能点界面效果截图如下:</p>
<ul>
<li>首页</li>
</ul>
<p><img src="http://www.startexample.com/images/assist/20160417/index.png" alt="首页"></p>
<ul>
<li>主题详情</li>
</ul>
<p><img src="http://www.startexample.com/images/assist/20160417/topicDetail.png" alt="主题详情"></p>
<ul>
<li>主题发表</li>
</ul>
<p><img src="http://www.startexample.com/images/assist/20160417/publishTopic.png" alt="主题发表"></p>
<ul>
<li>主题回复</li>
</ul>
<p><img src="http://www.startexample.com/images/assist/20160417/reply.png" alt="主题回复"></p>
<ul>
<li>用户登录</li>
</ul>
<p><img src="http://www.startexample.com/images/assist/20160417/login.png" alt="用户登录"></p>
<ul>
<li>用户注册</li>
</ul>
<p><img src="http://www.startexample.com/images/assist/20160417/registry.png" alt="用户注册"></p>
<h1 id="相关产出"><a href="#相关产出" class="headerlink" title="相关产出"></a>相关产出</h1><p>在实践该项目时主要的产出为<a href="http://startexample.com/2016/04/14/%E6%B5%85%E8%B0%88EJS%E6%A8%A1%E6%9D%BF%E8%A7%A3%E6%9E%90/" target="_blank" rel="external">浅谈EJS模板解析</a>, 写出来的只有这篇文章了. 另外实践过程中对<code>gzip</code>、<code>cookie/session</code>及其相关源码<code>koa-compress/koa-session</code>等也进行了相关知识研读, 总体来说收获还是不少的, 与此同时还有很多的知识点需要慢慢花时间去进一步学习并进行更深入的了解如<code>mongodb、etag、requirejs</code>等.</p>
<p>Long Long way wait to conquer, Just Keep Going!</p>

	</div>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', UA-76506889-1, 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>