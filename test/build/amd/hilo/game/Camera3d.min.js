/**
 * Hilo 1.0.1 for amd
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
define("hilo/game/Camera3d",["hilo/core/Hilo","hilo/core/Class"],function(t,i){var o=function(){function o(t,i,o,n,r){return{x:t,y:i*n-o*r,z:i*r+o*n}}function n(t,i,o,n,r){return{x:t*n-o*r,y:i,z:t*r+o*n}}function r(t,i,o,n,r){return{x:t*n-i*r,y:t*r+i*n,z:o}}var s=Math.PI/180,a=i.create({constructor:function(i){i.x=i.x||0,i.y=i.y||0,i.z=i.z||0,i.rotationX=i.rotationX||0,i.rotationY=i.rotationY||0,i.rotationZ=i.rotationZ||0,t.copy(this,i)},translate:function(t,i,o){this.tx=t,this.ty=i,this.tz=o},rotateX:function(t){this.rotationX=t},rotateY:function(t){this.rotationY=t},rotateZ:function(t){this.rotationZ=t},project:function(t,i){var a=this.rotationX*s,h=this.rotationY*s,c=this.rotationZ*s,e=Math.cos(a),u=Math.sin(a),z=Math.cos(h),f=Math.sin(h),y=Math.cos(c),x=Math.sin(c),l=t.x-this.x,M=t.y-this.y,Z=t.z-this.z,v=r(l,M,Z,y,x);v=n(v.x,v.y,v.z,z,f),v=o(v.x,v.y,v.z,e,u),this.tx&&(v.x-=this.tx),this.ty&&(v.y-=this.ty),this.tz&&(v.z-=this.tz);var X=this.fv/(this.fv+v.z),Y=v.x*X,d=-v.y*X,g={x:Y+this.fx,y:d+this.fy,z:-v.z,scale:X};return i&&(i.x=g.x,i.y=g.y,i.z=g.z,i.scaleX=g.scale,i.scaleY=g.scale),g},sortZ:function(){this.stage.children.sort(function(t,i){return t.z>i.z})},tick:function(){this.sortZ()}});return a}();return o});