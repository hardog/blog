/**
 * Hilo 1.0.1 for commonjs
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
var Hilo=function(){var t=window,e=document,o=e.documentElement,r=0;return{version:"1.0.1",getUid:function(t){var e=++r;if(t){var o=t.charCodeAt(t.length-1);return o>=48&&o<=57&&(t+="_"),t+e}return e},viewToString:function(t){for(var e,o=t;o;)e=e?o.id+"."+e:o.id,o=o.parent;return e},copy:function(t,e,o){for(var r in e)o&&!t.hasOwnProperty(r)&&void 0===t[r]||(t[r]=e[r]);return t},browser:function(){var r=navigator.userAgent,a={iphone:/iphone/i.test(r),ipad:/ipad/i.test(r),ipod:/ipod/i.test(r),ios:/iphone|ipad|ipod/i.test(r),android:/android/i.test(r),webkit:/webkit/i.test(r),chrome:/chrome/i.test(r),safari:/safari/i.test(r),firefox:/firefox/i.test(r),ie:/msie/i.test(r),opera:/opera/i.test(r),supportTouch:"ontouchstart"in t,supportCanvas:null!=e.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in t,supportDeviceMotion:"ondevicemotion"in t};try{var i="hilo";localStorage.setItem(i,i),localStorage.removeItem(i),a.supportStorage=!0}catch(n){}var s=a.jsVendor=a.webkit?"webkit":a.firefox?"moz":a.opera?"o":a.ie?"ms":"",d=a.cssVendor="-"+s+"-",h=e.createElement("div"),c=h.style,p=void 0!=c[s+"Transform"],f=void 0!=c[s+"Perspective"];return f&&(h.id="test3d",c=e.createElement("style"),c.textContent="@media ("+d+"transform-3d){#test3d{height:3px}}",e.head.appendChild(c),o.appendChild(h),f=3==h.offsetHeight,e.head.removeChild(c),o.removeChild(h)),a.supportTransform=p,a.supportTransform3D=f,a}(),event:function(){var e="ontouchstart"in t;return{POINTER_START:e?"touchstart":"mousedown",POINTER_MOVE:e?"touchmove":"mousemove",POINTER_END:e?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(e){try{var r=e.getBoundingClientRect()}catch(a){r={top:e.offsetTop,left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight}}var i=(t.pageXOffset||o.scrollLeft)-(o.clientLeft||0)||0,n=(t.pageYOffset||o.scrollTop)-(o.clientTop||0)||0,s=t.getComputedStyle?getComputedStyle(e):e.currentStyle,d=parseInt,h=d(s.paddingLeft)+d(s.borderLeftWidth)||0,c=d(s.paddingTop)+d(s.borderTopWidth)||0,p=d(s.paddingRight)+d(s.borderRightWidth)||0,f=d(s.paddingBottom)+d(s.borderBottomWidth)||0,l=r.top||0,g=r.left||0,m=r.right||0,u=r.bottom||0;return{left:g+i+h,top:l+n+c,width:m-p-g-h,height:u-f-l-c}},createElement:function(t,o){var r,a,i,n=e.createElement(t);for(r in o)if(a=o[r],"style"===r)for(i in a)n.style[i]=a[i];else n[r]=a;return n},getElement:function(t){return e.getElementById(t)},setElementStyleByView:function(t){var e=t.drawable,o=e.domElement.style,r=t._stateCache||(t._stateCache={}),a=Hilo.browser.jsVendor,i="px",n=!1;if(this.cacheStateIfChanged(t,["visible"],r)&&(o.display=t.visible?"":"none"),this.cacheStateIfChanged(t,["alpha"],r)&&(o.opacity=t.alpha),t.visible&&!(t.alpha<=0)){this.cacheStateIfChanged(t,["width"],r)&&(o.width=t.width+i),this.cacheStateIfChanged(t,["height"],r)&&(o.height=t.height+i),this.cacheStateIfChanged(t,["depth"],r)&&(o.zIndex=t.depth+1),(n=this.cacheStateIfChanged(t,["pivotX","pivotY"],r))&&(o[a+"TransformOrigin"]=t.pivotX+i+" "+t.pivotY+i),(this.cacheStateIfChanged(t,["x","y","rotation","scaleX","scaleY"],r)||n)&&(o[a+"Transform"]=this.getTransformCSS(t)),this.cacheStateIfChanged(t,["background"],r)&&(o.backgroundColor=t.background),o.pointerEvents||(o.pointerEvents="none");var s=e.image;if(s){var d=s.src;d!==r.image&&(r.image=d,o.backgroundImage="url("+d+")");var h=e.rect;if(h){var c=h[0],p=h[1];c!==r.sx&&(r.sx=c,o.backgroundPositionX=-c+i),p!==r.sy&&(r.sy=p,o.backgroundPositionY=-p+i)}}var f=t.mask;if(f){var l=f.drawable.domElement.style.backgroundImage;l!==r.maskImage&&(r.maskImage=l,o[a+"MaskImage"]=l,o[a+"MaskRepeat"]="no-repeat");var g=f.x,m=f.y;g===r.maskX&&m===r.maskY||(r.maskX=g,r.maskY=m,o[a+"MaskPosition"]=g+i+" "+m+i)}}},cacheStateIfChanged:function(t,e,o){var r,a,i,n,s=!1;for(r=0,a=e.length;r<a;r++)i=e[r],n=t[i],n!=o[i]&&(o[i]=n,s=!0);return s},getTransformCSS:function(t){var e=this.browser.supportTransform3D,o=e?"3d":"";return"translate"+o+"("+(t.x-t.pivotX)+"px, "+(t.y-t.pivotY)+(e?"px, 0px)":"px)")+"rotate"+o+(e?"(0, 0, 1, ":"(")+t.rotation+"deg)scale"+o+"("+t.scaleX+", "+t.scaleY+(e?", 1)":")")}}}();module.exports=Hilo;