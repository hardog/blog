/**
 * Hilo 1.0.1 for standalone
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
!function(t){var e=t.Hilo,i=e.Class,r=e.Container,n=e.Bitmap,h=i.create({Extends:r,constructor:function(t){t=t||{},this.id=this.id||t.id||e.getUid("BitmapText"),h.superclass.constructor.call(this,t);var i=t.text+"";i&&(this.text="",this.setText(i)),this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(t){var e=this,i=t.toString(),r=i.length;if(e.text!=i){e.text=i;var n,h,a,s,c=0,l=0,o=0;for(n=0;n<r;n++)h=i.charAt(n),a=e.glyphs[h],a&&(o=c+(c>0?e.letterSpacing:0),e.children[n]?(s=e.children[n],s.setImage(a.image,a.rect)):(s=e._createBitmap(a),e.addChild(s)),s.x=o,c=o+a.rect[2],l=Math.max(l,a.rect[3]));for(n=e.children.length-1;n>=r;n--)e._releaseBitmap(e.children[n]),e.children[n].removeFromParent();return e.width=c,e.height=l,this.setTextAlign(),e}},_createBitmap:function(t){var e;return h._pool.length?(e=h._pool.pop(),e.setImage(t.image,t.rect)):e=new n({image:t.image,rect:t.rect}),e},_releaseBitmap:function(t){h._pool.push(t)},setTextAlign:function(t){switch(this.textAlign=t||this.textAlign,this.textAlign){case"center":this.pivotX=.5*this.width;break;case"right":this.pivotX=this.width;break;case"left":default:this.pivotX=0}return this},hasGlyphs:function(t){var e=this.glyphs;if(!e)return!1;var i,t=t.toString(),r=t.length;for(i=0;i<r;i++)if(!e[t.charAt(i)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(t,e,i,r){var n=t.toString();i=i||n.length,r=r||1;for(var h=e.width/i,a=e.height/r,s={},c=0,l=t.length;c<l;c++)charStr=n.charAt(c),s[charStr]={image:e,rect:[h*(c%i),a*Math.floor(c/i),h,a]};return s}}});e.BitmapText=h}(window);